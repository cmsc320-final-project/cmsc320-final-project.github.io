<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>CMSC320 Final Project</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="/">Home</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">CMSC320 Final Project</h1>

</div>


<div id="introduction" class="section level1">
<h1>Introduction</h1>
</div>
<div id="loading-and-pre-processing-data" class="section level1">
<h1>Loading and Pre-processing Data</h1>
<p>Data can be easily loaded using R’s <code>read.csv</code> method. For example, here we can load and display <code>books.csv</code> to get a broad picture of one of the datasets we will be working with. We can see that <code>books.csv</code> organizes its data in a tabulated manner with each book as a row and the attributes of a book as columns.</p>
<pre class="r"><code>books_df &lt;- read.csv(&quot;./goodbooks-10k/books.csv&quot;)
head(books_df)</code></pre>
<pre><code>##   book_id goodreads_book_id best_book_id  work_id books_count      isbn
## 1       1           2767052      2767052  2792775         272 439023483
## 2       2                 3            3  4640799         491 439554934
## 3       3             41865        41865  3212258         226 316015849
## 4       4              2657         2657  3275794         487  61120081
## 5       5              4671         4671   245494        1356 743273567
## 6       6          11870085     11870085 16827462         226 525478817
##         isbn13                      authors original_publication_year
## 1 9.780439e+12              Suzanne Collins                      2008
## 2 9.780440e+12 J.K. Rowling, Mary GrandPrÃ©                      1997
## 3 9.780316e+12              Stephenie Meyer                      2005
## 4 9.780061e+12                   Harper Lee                      1960
## 5 9.780743e+12          F. Scott Fitzgerald                      1925
## 6 9.780525e+12                   John Green                      2012
##                             original_title
## 1                         The Hunger Games
## 2 Harry Potter and the Philosopher&#39;s Stone
## 3                                 Twilight
## 4                    To Kill a Mockingbird
## 5                         The Great Gatsby
## 6                   The Fault in Our Stars
##                                                      title language_code
## 1                  The Hunger Games (The Hunger Games, #1)           eng
## 2 Harry Potter and the Sorcerer&#39;s Stone (Harry Potter, #1)           eng
## 3                                  Twilight (Twilight, #1)         en-US
## 4                                    To Kill a Mockingbird           eng
## 5                                         The Great Gatsby           eng
## 6                                   The Fault in Our Stars           eng
##   average_rating ratings_count work_ratings_count work_text_reviews_count
## 1           4.34       4780653            4942365                  155254
## 2           4.44       4602479            4800065                   75867
## 3           3.57       3866839            3916824                   95009
## 4           4.25       3198671            3340896                   72586
## 5           3.89       2683664            2773745                   51992
## 6           4.26       2346404            2478609                  140739
##   ratings_1 ratings_2 ratings_3 ratings_4 ratings_5
## 1     66715    127936    560092   1481305   2706317
## 2     75504    101676    455024   1156318   3011543
## 3    456191    436802    793319    875073   1355439
## 4     60427    117415    446835   1001952   1714267
## 5     86236    197621    606158    936012    947718
## 6     47994     92723    327550    698471   1311871
##                                                     image_url
## 1  https://images.gr-assets.com/books/1447303603m/2767052.jpg
## 2        https://images.gr-assets.com/books/1474154022m/3.jpg
## 3    https://images.gr-assets.com/books/1361039443m/41865.jpg
## 4     https://images.gr-assets.com/books/1361975680m/2657.jpg
## 5     https://images.gr-assets.com/books/1490528560m/4671.jpg
## 6 https://images.gr-assets.com/books/1360206420m/11870085.jpg
##                                               small_image_url
## 1  https://images.gr-assets.com/books/1447303603s/2767052.jpg
## 2        https://images.gr-assets.com/books/1474154022s/3.jpg
## 3    https://images.gr-assets.com/books/1361039443s/41865.jpg
## 4     https://images.gr-assets.com/books/1361975680s/2657.jpg
## 5     https://images.gr-assets.com/books/1490528560s/4671.jpg
## 6 https://images.gr-assets.com/books/1360206420s/11870085.jpg</code></pre>
<p>Let’s load the rest of our data as well.</p>
<pre class="r"><code>ratings_df &lt;- read.csv(&quot;./goodbooks-10k/ratings.csv&quot;)
tags_df &lt;- read.csv(&quot;./goodbooks-10k/tags.csv&quot;)
book_tags_df &lt;- read.csv(&quot;./goodbooks-10k/book_tags.csv&quot;)</code></pre>
<p>One of the things we are interested in is the genre of certain books. We can narrow down the genres we are interested in with pipeline that filters for certain genre names.</p>
<pre class="r"><code>tags_df &lt;- tags_df %&gt;%
  filter(tag_name %in% c(
    &quot;fantasy&quot;,
    &quot;mystery&quot;,
    &quot;horror&quot;,
    &quot;realistic-fiction&quot;,
    &quot;romance&quot;,
    &quot;science-fiction&quot;,
    &quot;thriller&quot;,
    &quot;young-adult&quot;
  ))
tags_df</code></pre>
<pre><code>##   tag_id          tag_name
## 1  11305           fantasy
## 2  14821            horror
## 3  20939           mystery
## 4  25438 realistic-fiction
## 5  26138           romance
## 6  26837   science-fiction
## 7  30358          thriller
## 8  33114       young-adult</code></pre>
<p>However, this information is not very helpful by itself. We want to be able to use it in conjunction with the other data we have. One way to accomplish this is by joining data across different datasets through a common attribute. Here, we construct a pipeline to link data from <code>books_df</code> and <code>book_tags_df</code> through the shared attribute, <code>goodreads_book_id</code>, and then <code>book_tags_df</code> and <code>tags_df</code> through <code>tag_id</code>. We can see that <code>tag_name</code> does indeed describe the genre of the books it’s associated with.</p>
<pre class="r"><code>book_genres_df &lt;- books_df %&gt;%
  inner_join(book_tags_df, by=&quot;goodreads_book_id&quot;) %&gt;%
  inner_join(tags_df, by=&quot;tag_id&quot;) %&gt;%
  select(&quot;book_id&quot;, &quot;title&quot;, &quot;tag_name&quot;)
  
head(book_genres_df, 15)</code></pre>
<pre><code>##    book_id                                                    title
## 1        1                  The Hunger Games (The Hunger Games, #1)
## 2        1                  The Hunger Games (The Hunger Games, #1)
## 3        1                  The Hunger Games (The Hunger Games, #1)
## 4        1                  The Hunger Games (The Hunger Games, #1)
## 5        1                  The Hunger Games (The Hunger Games, #1)
## 6        2 Harry Potter and the Sorcerer&#39;s Stone (Harry Potter, #1)
## 7        2 Harry Potter and the Sorcerer&#39;s Stone (Harry Potter, #1)
## 8        2 Harry Potter and the Sorcerer&#39;s Stone (Harry Potter, #1)
## 9        3                                  Twilight (Twilight, #1)
## 10       3                                  Twilight (Twilight, #1)
## 11       3                                  Twilight (Twilight, #1)
## 12       3                                  Twilight (Twilight, #1)
## 13       4                                    To Kill a Mockingbird
## 14       4                                    To Kill a Mockingbird
## 15       4                                    To Kill a Mockingbird
##             tag_name
## 1        young-adult
## 2            fantasy
## 3    science-fiction
## 4            romance
## 5           thriller
## 6            fantasy
## 7        young-adult
## 8            mystery
## 9        young-adult
## 10           fantasy
## 11            horror
## 12   science-fiction
## 13       young-adult
## 14 realistic-fiction
## 15           mystery</code></pre>
<p>Now we can use <code>book_genres_df</code> to try to figure out Goodreads readership. Let’s build another pipeline to join with <code>ratings_df</code> to link users with the genres of the books they rated. We can do more data manipulation from there to end up with a table of mean ratings in each genre of interest for each users.</p>
<pre class="r"><code># This takes awhile to run...

user_features_raw_df &lt;- ratings_df %&gt;%
  inner_join(book_genres_df, by=&quot;book_id&quot;) %&gt;%
  spread(tag_name, rating) %&gt;%
  select(-book_id, -title,)

user_features_df &lt;- user_features_raw_df %&gt;%
  group_by(user_id) %&gt;%
  summarize_all(mean, na.rm=TRUE)

head(user_features_df, 15)</code></pre>
<pre><code>## # A tibble: 15 x 9
##    user_id fantasy horror mystery `realistic-fict~ romance `science-fictio~
##      &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;            &lt;dbl&gt;   &lt;dbl&gt;            &lt;dbl&gt;
##  1       1    3.55   3.29    3.4              3.51    3.45             3.14
##  2       2    4.85   5       4.9              4.38    4.12             4.75
##  3       3    1.45   1.5     1.24             2       1.76             1.17
##  4       4    3.90   3.59    3.55             3.65    3.44             3.54
##  5       5    4.11   4.03    4.03             3.95    3.93             4.11
##  6       6    4.2    4.25    4.14             4.29    4.43             4.17
##  7       7    3.79   3.78    3.76             4       3.51             3.76
##  8       8    4.09   3.95    3.81             3.25    3.17             4.42
##  9       9    3.66   3.67    3.25             3.37    3.52             3.58
## 10      10    4.02   3.88    3.92             3.86    3.76             3.89
## 11      11    3.63   3.69    3.42             3.59    3.44             3.4 
## 12      12    3.54   3.38    3.85             3.86    3.56             3.81
## 13      13    3.64   4       4.33             4.29    4.11             4   
## 14      14    3.61   3.6     3.6              3.08    3.32             3.66
## 15      15    4.26   4.45    4                4.35    4.31             4.33
## # ... with 2 more variables: thriller &lt;dbl&gt;, `young-adult` &lt;dbl&gt;</code></pre>
</div>
<div id="data-analysis-and-visualization" class="section level1">
<h1>Data Analysis and Visualization</h1>
<p>One way we can better understand our data is through visualization. For example, if we want to see where the readership lies on average ratings for horror and fantasy by plotting a 2D scatterplot. From the graph, it appears most users are clustered from 3 to 5, and there is not a strong overall preference for one genre versus the other.</p>
<pre class="r"><code>ggplot(user_features_df, mapping=aes(x=fantasy, y=`young-adult`)) +
  geom_point() +
  labs(
    title=&quot;User Average Ratings for Young Adult Versus Fantasy&quot;,
    x=&quot;Fantasy Rating&quot;,
    y=&quot;Young Adult Ratings&quot;
  )</code></pre>
<pre><code>## Warning: Removed 105 rows containing missing values (geom_point).</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<pre class="r"><code># TODO: maybe also do ANOVA??</code></pre>
</div>
<div id="predictions" class="section level1">
<h1>Predictions</h1>
<pre class="r"><code># TODO: kmeans clustering</code></pre>
</div>
<div id="conclusion" class="section level1">
<h1>Conclusion</h1>
</div>
<div id="acknowledgements" class="section level1">
<h1>Acknowledgements</h1>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
